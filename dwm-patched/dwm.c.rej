***************
*** 470,479 ****
  	for(m = mons; m; m = m->next)
  		while(m->stack)
  			unmanage(m->stack);
- 	if(dc.font.set)
- 		XFreeFontSet(dpy, dc.font.set);
- 	else
- 		XFreeFont(dpy, dc.font.xfont);
  	XUngrabKey(dpy, AnyKey, AnyModifier, root);
  	XFreePixmap(dpy, dc.drawable);
  	XFreeGC(dpy, dc.gc);
--- 490,495 ----
  	for(m = mons; m; m = m->next)
  		while(m->stack)
  			unmanage(m->stack);
  	XUngrabKey(dpy, AnyKey, AnyModifier, root);
  	XFreePixmap(dpy, dc.drawable);
  	XFreeGC(dpy, dc.gc);
***************
*** 542,547 ****
  		dc.drawable = XCreatePixmap(dpy, root, sw, bh, DefaultDepth(dpy, screen));
  		updatebars();
  		for(m = mons; m; m = m->next)
  			XMoveResizeWindow(dpy, m->barwin, m->wx, m->by, m->ww, bh);
  		arrange();
  	}
--- 558,564 ----
  		dc.drawable = XCreatePixmap(dpy, root, sw, bh, DefaultDepth(dpy, screen));
  		updatebars();
  		for(m = mons; m; m = m->next)
+ 			XftDrawChange(dc.xftdrawable, dc.drawable);
  			XMoveResizeWindow(dpy, m->barwin, m->wx, m->by, m->ww, bh);
  		arrange();
  	}
***************
*** 1761,1767 ****
  			m->mx = m->wx = info[i].x_org;
  			m->my = m->wy = info[i].y_org;
  			m->mw = m->ww = info[i].width;
- 			m->mh = m->wh = info[i].height;
  		}
  		XFree(info);
  	}
--- 1754,1760 ----
  			m->mx = m->wx = info[i].x_org;
  			m->my = m->wy = info[i].y_org;
  			m->mw = m->ww = info[i].width;
+ 			m->mh = m->wh = info[i].height - BOTTOM_BAR_HEIGHT;
  		}
  		XFree(info);
  	}
